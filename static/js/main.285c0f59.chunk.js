(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(241)},235:function(e,t,a){e.exports=a.p+"static/media/gameLoop.fccddc68.png"},236:function(e,t,a){e.exports=a.p+"static/media/server.22ce31b1.png"},237:function(e,t,a){e.exports=a.p+"static/media/sendState.510e8244.png"},238:function(e,t,a){e.exports=a.p+"static/media/clientServer.6e85baa7.png"},239:function(e,t,a){e.exports=a.p+"static/media/webrtcClient.f5b35b80.png"},241:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),c=a.n(r),i=a(107),s=a(92),o=a.n(s),u=a(4),m=a(5),p=a(7),h=a(6),E=a(8),d=a(255),b=a(251),g=a(247),f=a(248),y=a(230),w=a(254),j=a(249),O=a(250),v=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,this.props,this.props.children)}}]),t}(l.a.Component),C=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(b.a,this.props,this.props.children)}}]),t}(l.a.Component),k=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,Object.assign({size:5,margin:"25",textColor:"tertiary"},this.props),this.props.children)}}]),t}(l.a.Component),T=(l.a.Component,function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(y.a,Object.assign({margin:"25"},this.props),this.props.children)}}]),t}(l.a.Component)),W=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(w.a,Object.assign({style:{height:"100%"}},this.props),this.props.children)}}]),t}(l.a.Component),P=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(j.a,Object.assign({margin:"25",textColor:"quaternary",textAlign:"left"},this.props),this.props.children)}}]),t}(l.a.Component),S=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(O.a,this.props,this.props.children)}}]),t}(l.a.Component),U=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("span",{style:{fontFamily:"monospace",color:"#ee8613"}},this.props.children)}}]),t}(l.a.Component),R=(l.a.Component,function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(v,null,l.a.createElement(P,Object.assign({margin:"25"},this.props,{textAlign:"left"}),this.props.children))}}]),t}(l.a.Component)),x=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(v,null,l.a.createElement(S,this.props,this.props.children))}}]),t}(l.a.Component),D=a(106),A=a.n(D);a(231);var I=A()({primary:"#131226",secondary:"#F2E30C",tertiary:"#F2A30F",quaternary:"#F27B13",fifth:"#F24B0F"},{primary:"Montserrat",secondary:"Helvetica"},{margin:"10"}),N={gameLoop:a(235),server:a(236),sendState:a(237),clientServer:a(238),webrtcClient:a(239)},F=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(C,{transition:[],theme:I},l.a.createElement(W,null,l.a.createElement(k,null,"Real Time Multiplayer Web Games & WebRTC")),l.a.createElement(W,null,l.a.createElement(k,null,"Why this topic?"),l.a.createElement(R,null),l.a.createElement(R,null,"I think this stuff is super cool and want to share it!"),l.a.createElement(R,null,"I've learned it along the way of making some web games of my own"),l.a.createElement(R,null,"Gaming has many extremely difficult and unique engineering problems"),l.a.createElement(R,null,"It's fun!")),l.a.createElement(W,null,l.a.createElement(P,null,"Let's start by going over multiplayer game architectures")),l.a.createElement(W,null,l.a.createElement(k,null,"What goes into a game?"),l.a.createElement(R,null,"Let's start with a simple singleplayer game")),l.a.createElement(W,null,l.a.createElement(k,null,"Minimal singleplayer game loop"),l.a.createElement(S,{width:"50%",src:N.gameLoop}),l.a.createElement(R,null,l.a.createElement(U,null,"processInputs()")," reads client keyboard inputs"),l.a.createElement(R,null,l.a.createElement(U,null,"update()")," processes the game logic"),l.a.createElement(R,null,l.a.createElement(U,null,"draw()")," renders the game"),l.a.createElement(R,null,"Run it 60 times a second and we've got a game going!")),l.a.createElement(W,null,l.a.createElement(k,null,"Now to add multiplayer"),l.a.createElement(R,null,"We'll go with a normal client-server architecture"),l.a.createElement(R,null,"Always remember the most important rule for secure multiplayer games"),l.a.createElement(R,null,l.a.createElement("b",null,"Never trust the client!")),l.a.createElement(R,null,'We\'ll need an "authoritative server"')),l.a.createElement(W,null,l.a.createElement(k,null,"Authoritative server"),l.a.createElement(x,{src:N.server,width:"50%"})),l.a.createElement(W,null,l.a.createElement(k,null,"Let's look at ",l.a.createElement(U,null,"sendStateToClients()")),l.a.createElement(x,{src:N.sendState,width:"50%"}),l.a.createElement(R,null,"We tell each client its entity id, and the game state")),l.a.createElement(W,null,l.a.createElement(k,null,"What about on the client side?"),l.a.createElement(x,{src:N.clientServer,width:"50%"})),l.a.createElement(W,null,l.a.createElement(k,null,"So far, simple, but many issues"),l.a.createElement(R,null,"Any updates require a full round-trip to the server"),l.a.createElement(R,null,l.a.createElement("b",null,"That means input lag!")),l.a.createElement(R,null,"From another continent, you press a button, and might wait half a second for it to register")),l.a.createElement(W,null,l.a.createElement(P,null,"For input lag, solutions must be customized to the game - mix together:"),l.a.createElement(R,null,"Client-side prediction"),l.a.createElement(R,null,"Lag compensation"),l.a.createElement(R,null,"Server reconciliation"),l.a.createElement(R,null,"We won't go into detail on these further, but they're all quite interesting"),l.a.createElement(R,null,"These solutions are key to a smooth-feeling, fast-paced game")),l.a.createElement(W,null,l.a.createElement(k,null,"However - not perfect solutions!"),l.a.createElement(R,null,"They're tricks that try to hide the lag from the player"),l.a.createElement(R,null,"If lag is bad enough, it will still feel terrible"),l.a.createElement(R,null,"How can we make that bad lag less likely for players?"),l.a.createElement(R,null,"Almost ready to introduce WebRTC..."),l.a.createElement(R,null,"But first, a look into TCP vs UDP for gaming")),l.a.createElement(W,null,l.a.createElement(k,null,"TCP vs UDP for gaming"),l.a.createElement(R,null,"TCP: Reliable, ordered message stream"),l.a.createElement(R,null,"Dropped packets are retried; newer packets are delayed until old ones go through"),l.a.createElement(R,null,"This is great for many things on the web, but retrying & delaying makes lag ",l.a.createElement("b",null,"worse"),"!"),l.a.createElement(R,null,"Playing on a poor WiFi connnection will feel awful because of dropped packets delaying new data")),l.a.createElement(W,null,l.a.createElement(k,null,"TCP vs UDP for gaming"),l.a.createElement(P,null,"UDP: Unreliable, unordered messages"),l.a.createElement(R,null,"Dropped packets are not retried"),l.a.createElement(R,null,"New messages may arrive before old messages"),l.a.createElement(R,null,"All the reliability of TCP is gone - but so are the slowdowns")),l.a.createElement(W,null,l.a.createElement(k,null,"TCP vs UDP for gaming"),l.a.createElement(R,null,"Due to TCP's non time-critical nature, UDP is preferred for fast paced multiplayer games"),l.a.createElement(R,null,"Still need to ensure data is not lost"),l.a.createElement(R,null,"Message reliability needs to be built ad-hoc"),l.a.createElement(R,null,"Clients and servers exchange acknowleded recent message ids"),l.a.createElement(R,null,"Messages unacknowleded within certain time are resent if necessary"),l.a.createElement(R,null,"Client continues to get other data when there was a dropped packet!")),l.a.createElement(W,null,l.a.createElement(P,null,"Using UDP = much more consistent networking experience")),l.a.createElement(W,null,l.a.createElement(k,null,"Problem solved? Not for browser games!"),l.a.createElement(R,null,"Unfortunately... ",l.a.createElement("i",null,"browsers just can't do UDP")),l.a.createElement(R,null,"Browsers were built on top of HTTP, which needs reliable streams"),l.a.createElement(R,null,"Is all hope for real-time web games lost?"),l.a.createElement(R,null,"Not yet...")),l.a.createElement(W,null,l.a.createElement(k,null,"In comes WebRTC (Web Real-Time Communication)"),l.a.createElement(R,null,"Supports streaming audio and video & direct peer-to-peer connections"),l.a.createElement(R,null,"Replacement for the plugins and custom native apps (remember Flash? Silverlight?)"),l.a.createElement(R,null,"Widely supported in all major browsers"),l.a.createElement(R,null,"Spec is very complicated - client-server game with a data stream is not the intended use case"),l.a.createElement(R,null,"A less known feature of WebRTC: Arbitrary binary data channels"),l.a.createElement(R,null,"That sounds perfect - let's try to use it!")),l.a.createElement(W,null,l.a.createElement(k,null,"Will this work? Does WebRTC support UDP?"),l.a.createElement(R,null,"No..."),l.a.createElement(R,null,"but it uses something we can make work just like it: ",l.a.createElement("b",null,"STCP!")),l.a.createElement(R,null,"STCP (Scalable TCP) is configurable"),l.a.createElement(R,null,"We can set ",l.a.createElement(U,null,"retries = 0")," and ",l.a.createElement(U,null,"ordered = false")),l.a.createElement(R,null,"Just like UDP!")),l.a.createElement(W,null,l.a.createElement(k,null,"But, isn't WebRTC hard to use?"),l.a.createElement(R,null,l.a.createElement("b",null,"Yes")),l.a.createElement(R,null,"Much harder to get up and running than websockets"),l.a.createElement(R,null,"Browser debug tools are awful compared to websockets"),l.a.createElement(R,null,"But it can be done!"),l.a.createElement(R,null,"Libraries like Node's ",l.a.createElement(U,null,"node-webrtc")," and Rust's ",l.a.createElement(U,null,"webrtc-unreliable")," exist"),l.a.createElement(R,null,"Server acts like a peer that the clients connect to")),l.a.createElement(W,null,l.a.createElement(k,null,"WebRTC code on the client"),l.a.createElement(x,{src:N.webrtcClient})),l.a.createElement(W,null,l.a.createElement(k,null,"STUN? ICE?!"),l.a.createElement(R,null,"STUN (Session Traversal Utilities for NAT) is a server that helps establish the connection with the peer"),l.a.createElement(R,null,"You can use a public STUN server, or run your own lightweight STUN server"),l.a.createElement(R,null,"ICE (Interactive Connectivity Establishment) is the protocol to establish the connection")),l.a.createElement(W,null,l.a.createElement(k,null,"So what was all that?"),l.a.createElement(R,null,"We use a normal HTTP endpoint to expose the server as the ICE candidate"),l.a.createElement(R,null,"Let's look again")),l.a.createElement(W,null,l.a.createElement(k,null,"WebRTC code on the client, again"),l.a.createElement(x,{src:N.webrtcClient})),l.a.createElement(W,null,l.a.createElement(P,null,"On the server, those libraries do the heavy lifting"),l.a.createElement(R,null,"They implement the minimal WebRTC spec for unreliable data streams from a server"),l.a.createElement(R,null,"Using them, we can then write our code almost as easily as if using a websocket!")),l.a.createElement(W,null,l.a.createElement(k,null,"And we're done!"),l.a.createElement(R,null,"That's the basics of WebRTC, and how it may be the future of real-time browser games"),l.a.createElement(R,null,"WebRTC is pretty new still (version 1.0 released 2 years ago), so most web games are not using it yet"),l.a.createElement(R,null,"But soon!"),l.a.createElement(R,null,"Thanks for listening")))}}]),t}(l.a.Component);c.a.render(l.a.createElement(i.AppContainer,{errorReporter:function(e){var t=e.error;return l.a.createElement(o.a,{error:t})}},l.a.createElement(F,null)),document.getElementById("root"))}},[[110,2,1]]]);
//# sourceMappingURL=main.285c0f59.chunk.js.map